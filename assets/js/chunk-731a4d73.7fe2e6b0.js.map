{"version":3,"sources":["webpack:///./node_modules/core-js/modules/_array-methods.js","webpack:///./node_modules/core-js/modules/_is-array.js","webpack:///./node_modules/core-js/modules/es6.array.find.js","webpack:///./src/components/base/Login.vue?421b","webpack:///./node_modules/core-js/modules/_array-species-create.js","webpack:///./node_modules/core-js/modules/_array-species-constructor.js","webpack:///./src/components/base/Login.vue?8c85","webpack:///src/components/base/Login.vue","webpack:///./src/components/base/Login.vue?3d4a","webpack:///./src/components/base/Login.vue","webpack:///./src/mixins/loginAuthcode.js"],"names":["ctx","__webpack_require__","IObject","toObject","toLength","asc","module","exports","TYPE","$create","IS_MAP","IS_FILTER","IS_SOME","IS_EVERY","IS_FIND_INDEX","NO_HOLES","create","$this","callbackfn","that","val","res","O","self","f","length","index","result","undefined","push","cof","Array","isArray","arg","$export","$find","KEY","forced","P","F","find","this","arguments","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_10_oneOf_1_0_node_modules_css_loader_index_js_ref_10_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_10_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Login_vue_vue_type_style_index_0_lang_less___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_10_oneOf_1_0_node_modules_css_loader_index_js_ref_10_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_10_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Login_vue_vue_type_style_index_0_lang_less___WEBPACK_IMPORTED_MODULE_0___default","n","speciesConstructor","original","isObject","SPECIES","C","constructor","prototype","render","_vm","_h","$createElement","_c","_self","staticClass","on","click","$event","$router","go","attrs","to","_v","action","_m","placeholder","clearable","maxlength","phoneLength","model","value","callback","$$v","userPhone","expression","clear","show-password","passwordMaxLength","change","passwordChange","password","_e","isLoginWithPassword","id","type","disabled","isPhoneFormatValid","loginWithPassword","directives","name","rawName","loginWithAuthcode","tabLoginMethod","_s","_f","staticRenderFns","Loginvue_type_script_lang_js_","mixins","loginAuthcode","data","redirect","authCode","loading","computed","Object","objectSpread","vuex_esm","get","$store","state","login","set","commit","isPasswordFormatValid","passwordRegular","test","phoneRegular","methods","$message","error","_this","setPassword","_axios_0_18_0_axios_default","a","post","then","code","JSON","parse","console","log","$cookie","catch","err","_this2","requestAuthcode","saveAuthInfo","filters","loginMethod","beforeRouteEnter","from","next","vm","redirects","path","fullPath","created","base_Loginvue_type_script_lang_js_","component","componentNormalizer","__webpack_exports__","axios__WEBPACK_IMPORTED_MODULE_0__","axios__WEBPACK_IMPORTED_MODULE_0___default","mixin","context","keyValue","startTime","Date","getTime","sessionStorage","setItem","stringify","cb","errcb","finallycb","axios","authcodeReady","finally","fetchSesstionStorage","key","getItem"],"mappings":"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","file":"assets/js/chunk-731a4d73.7fe2e6b0.js","sourcesContent":["// 0 -> Array#forEach\n// 1 -> Array#map\n// 2 -> Array#filter\n// 3 -> Array#some\n// 4 -> Array#every\n// 5 -> Array#find\n// 6 -> Array#findIndex\nvar ctx = require('./_ctx');\nvar IObject = require('./_iobject');\nvar toObject = require('./_to-object');\nvar toLength = require('./_to-length');\nvar asc = require('./_array-species-create');\nmodule.exports = function (TYPE, $create) {\n  var IS_MAP = TYPE == 1;\n  var IS_FILTER = TYPE == 2;\n  var IS_SOME = TYPE == 3;\n  var IS_EVERY = TYPE == 4;\n  var IS_FIND_INDEX = TYPE == 6;\n  var NO_HOLES = TYPE == 5 || IS_FIND_INDEX;\n  var create = $create || asc;\n  return function ($this, callbackfn, that) {\n    var O = toObject($this);\n    var self = IObject(O);\n    var f = ctx(callbackfn, that, 3);\n    var length = toLength(self.length);\n    var index = 0;\n    var result = IS_MAP ? create($this, length) : IS_FILTER ? create($this, 0) : undefined;\n    var val, res;\n    for (;length > index; index++) if (NO_HOLES || index in self) {\n      val = self[index];\n      res = f(val, index, O);\n      if (TYPE) {\n        if (IS_MAP) result[index] = res;   // map\n        else if (res) switch (TYPE) {\n          case 3: return true;             // some\n          case 5: return val;              // find\n          case 6: return index;            // findIndex\n          case 2: result.push(val);        // filter\n        } else if (IS_EVERY) return false; // every\n      }\n    }\n    return IS_FIND_INDEX ? -1 : IS_SOME || IS_EVERY ? IS_EVERY : result;\n  };\n};\n","// 7.2.2 IsArray(argument)\nvar cof = require('./_cof');\nmodule.exports = Array.isArray || function isArray(arg) {\n  return cof(arg) == 'Array';\n};\n","'use strict';\n// 22.1.3.8 Array.prototype.find(predicate, thisArg = undefined)\nvar $export = require('./_export');\nvar $find = require('./_array-methods')(5);\nvar KEY = 'find';\nvar forced = true;\n// Shouldn't skip holes\nif (KEY in []) Array(1)[KEY](function () { forced = false; });\n$export($export.P + $export.F * forced, 'Array', {\n  find: function find(callbackfn /* , that = undefined */) {\n    return $find(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\nrequire('./_add-to-unscopables')(KEY);\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=style&index=0&lang=less&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=style&index=0&lang=less&\"","// 9.4.2.3 ArraySpeciesCreate(originalArray, length)\nvar speciesConstructor = require('./_array-species-constructor');\n\nmodule.exports = function (original, length) {\n  return new (speciesConstructor(original))(length);\n};\n","var isObject = require('./_is-object');\nvar isArray = require('./_is-array');\nvar SPECIES = require('./_wks')('species');\n\nmodule.exports = function (original) {\n  var C;\n  if (isArray(original)) {\n    C = original.constructor;\n    // cross-realm fallback\n    if (typeof C == 'function' && (C === Array || isArray(C.prototype))) C = undefined;\n    if (isObject(C)) {\n      C = C[SPECIES];\n      if (C === null) C = undefined;\n    }\n  } return C === undefined ? Array : C;\n};\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"login\"},[_c('header',{staticClass:\"login-header\"},[_c('div',{staticClass:\"login-close iconfont icon-LC_icon_close_fill_circle\",on:{\"click\":function($event){return _vm.$router.go(-1)}}}),_c('router-link',{attrs:{\"to\":\"/help\"}},[_vm._v(\"帮助\")])],1),_c('div',{staticClass:\"login-form\"},[_c('p',{staticClass:\"login-form-title\"},[_vm._v(\"欢迎登陆美团\")]),_c('form',{staticClass:\"login-form-main\",attrs:{\"action\":\"post\"}},[_c('div',{staticClass:\"form-item\"},[_vm._m(0),_c('el-input',{staticClass:\"form-input\",attrs:{\"placeholder\":\"请输入手机号\",\"clearable\":\"\",\"maxlength\":_vm.phoneLength},model:{value:(_vm.userPhone),callback:function ($$v) {_vm.userPhone=$$v},expression:\"userPhone\"}})],1),(_vm.isLoginWithPassword)?_c('div',{staticClass:\"form-item\"},[_c('el-input',{attrs:{\"clear\":\"form-input\",\"placeholder\":\"请输入密码\",\"show-password\":\"\",\"clearable\":\"\",\"maxlength\":_vm.passwordMaxLength},on:{\"change\":_vm.passwordChange},model:{value:(_vm.password),callback:function ($$v) {_vm.password=$$v},expression:\"password\"}})],1):_vm._e(),_c('p',{staticClass:\"login-form-main-tips\"},[_vm._v(\"未注册的手机号验证后自动创建账户\")]),(!_vm.isLoginWithPassword)?_c('button',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticClass:\"rounded-long-primary-btn\",attrs:{\"id\":\"login-form-get_authentication\",\"type\":\"button\",\"disabled\":!_vm.isPhoneFormatValid},on:{\"click\":_vm.loginWithAuthcode}},[_vm._v(\"\\n                获取短信验证码\\n            \")]):_c('button',{staticClass:\"rounded-long-primary-btn\",attrs:{\"id\":\"login-form-get_authentication\",\"type\":\"button\",\"disabled\":!_vm.isPhoneFormatValid},on:{\"click\":_vm.loginWithPassword}},[_vm._v(\"\\n                登录\\n            \")])]),_c('div',{staticClass:\"login-form-by-password\",on:{\"click\":_vm.tabLoginMethod}},[_vm._v(\"\\n            \"+_vm._s(_vm._f(\"loginMethod\")(_vm.isLoginWithPassword))+\"\\n        \")])]),_c('footer',{staticClass:\"login-footer\"},[_vm._m(1),_c('p',{staticClass:\"login-footer-p\"},[_vm._v(\"\\n            登陆代表你已同意\\n            \"),_c('router-link',{staticClass:\"login-footer-p-mark\",attrs:{\"to\":\"/user-protocol\"}},[_vm._v(\"用户协议\")]),_vm._v(\"\\n            、\\n            \"),_c('router-link',{staticClass:\"login-footer-p-mark\",attrs:{\"to\":\"/privacy-policy\"}},[_vm._v(\"隐私政策\")])],1)])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"form-input_append\"},[_vm._v(\"+86 \"),_c('i',{staticClass:\"iconfont icon-next-m\"})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"login-footer-other_ways\"},[_c('div',{staticClass:\"icon-wrapper\"},[_c('i',{staticClass:\"iconfont icon-wechat\"})]),_c('div',{staticClass:\"icon-wrapper\"},[_c('i',{staticClass:\"iconfont icon-qq\"})])])}]\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"login\">\r\n        <header class=\"login-header\">\r\n            <div class=\"login-close iconfont icon-LC_icon_close_fill_circle\" @click=\"$router.go(-1)\"></div>\r\n            <router-link to=\"/help\">帮助</router-link>\r\n        </header>\r\n        <div class=\"login-form\">\r\n            <p class=\"login-form-title\">欢迎登陆美团</p>\r\n            <form class=\"login-form-main\" action=\"post\">\r\n                <!-- // * 手机号输入 -->\r\n                <div class=\"form-item\">\r\n                    <div class=\"form-input_append\">+86 <i class=\"iconfont icon-next-m\"></i></div>\r\n                        <el-input class=\"form-input\" placeholder=\"请输入手机号\" v-model=\"userPhone\"\r\n                            clearable\r\n                            :maxlength=\"phoneLength\"/>\r\n                </div>\r\n                <!-- // * 密码输入 -->\r\n                <div class=\"form-item\" v-if=\"isLoginWithPassword\">\r\n                    <el-input clear=\"form-input\" placeholder=\"请输入密码\"\r\n                        v-model=\"password\"\r\n                        show-password\r\n                        clearable\r\n                        :maxlength=\"passwordMaxLength\"\r\n                        @change=\"passwordChange\"/>\r\n                </div>\r\n                \r\n                <p class=\"login-form-main-tips\">未注册的手机号验证后自动创建账户</p>\r\n                <!-- //* 验证码登录 -->\r\n                <button id=\"login-form-get_authentication\" class=\"rounded-long-primary-btn\"\r\n                    type=\"button\"\r\n                    :disabled=\"!isPhoneFormatValid\"\r\n                    v-if=\"!isLoginWithPassword\"\r\n                    @click=\"loginWithAuthcode\"\r\n                    v-loading=\"loading\"\r\n                >\r\n                    获取短信验证码\r\n                </button>\r\n                <!-- 验证码 end -->\r\n                <!-- // * 密码登录按钮 -->\r\n                <button id=\"login-form-get_authentication\" class=\"rounded-long-primary-btn\"\r\n                    type=\"button\"\r\n                    :disabled=\"!isPhoneFormatValid\"\r\n                    v-else\r\n                    @click=\"loginWithPassword\"\r\n                >\r\n                    登录\r\n                </button>\r\n            </form>\r\n            <!-- 登录方式 -->\r\n            <!-- 验证码登录 | 密码登录 -->\r\n            <div class=\"login-form-by-password\"\r\n                @click=\"tabLoginMethod\"\r\n            >\r\n                {{isLoginWithPassword | loginMethod}}\r\n            </div>\r\n        </div>\r\n        <footer class=\"login-footer\">\r\n            <div class=\"login-footer-other_ways\">\r\n                <div class=\"icon-wrapper\"><i class=\"iconfont icon-wechat\"></i></div>\r\n                <div class=\"icon-wrapper\"><i class=\"iconfont icon-qq\"></i></div>\r\n            </div>\r\n            <p class=\"login-footer-p\">\r\n                登陆代表你已同意\r\n                <router-link class=\"login-footer-p-mark\" to=\"/user-protocol\">用户协议</router-link>\r\n                、\r\n                <router-link class=\"login-footer-p-mark\" to=\"/privacy-policy\">隐私政策</router-link>\r\n            </p>\r\n        </footer>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios'\r\nimport mixin from '@/mixins/loginAuthcode.js'\r\nimport { mapState, mapMutations } from 'vuex'\r\n\r\nexport default {\r\n    name: 'Login',\r\n    mixins: [mixin],\r\n    data() { \r\n        return {\r\n            isLoginWithPassword: false, // 密码登录 / 验证码登录\r\n            redirect: '',\r\n            authCode: '',\r\n            loading: false,\r\n            phoneLength: 11,\r\n            passwordMaxLength: 18,\r\n        }\r\n    },\r\n    computed: {\r\n        ...mapState('login',{\r\n            // userPhone: state => state.userPhone,\r\n            // password: state => state.password,\r\n        }),\r\n        userPhone: {\r\n            get(){\r\n                return this.$store.state.login.userPhone\r\n            },\r\n            set(value){\r\n                this.$store.commit('login/setUserPhone', value)\r\n            }\r\n        },\r\n        password: {\r\n            get(){\r\n                return this.$store.state.login.password\r\n            },\r\n            set(value){\r\n                this.$store.commit('login/setPassword', value)\r\n            }\r\n        },\r\n        isPasswordFormatValid(){\r\n            // 以字母开头，长度在6~18之间，只能包含字母、数字和下划线\r\n            let passwordRegular = /^[a-zA-Z]\\w{5,17}$/\r\n            return passwordRegular.test(this.password)\r\n        },\r\n        isPhoneFormatValid(){\r\n            const phoneRegular = /^([1][3,4,5,6,7,8,9])\\d{9}$/\r\n            // 判断输入的手机号是否满足条件\r\n            return phoneRegular.test(this.userPhone)\r\n        }\r\n    },\r\n    methods: {\r\n        ...mapMutations('login',[\r\n            'setUserPhone',\r\n            'setPassword',\r\n            'setAuthcode'\r\n        ]),\r\n        tabLoginMethod(){\r\n            this.isLoginWithPassword = !this.isLoginWithPassword\r\n        },\r\n        passwordChange(value){\r\n            if(!this.isPasswordFormatValid){\r\n                this.$message.error('请重新设置密码,以字母开头，长度在6~18之间，只能包含字母、数字和下划线')\r\n            }\r\n        },\r\n        loginWithPassword(){ // 密码登录\r\n            if(!this.isPasswordFormatValid){\r\n                this.$message.error('密码格式错误')\r\n                this.setPassword('')\r\n                return\r\n            }\r\n            axios.post('/api/login-password', {\r\n                userPhone: this.userPhone,\r\n                password: this.password\r\n            })\r\n            .then(res => {\r\n                let code = JSON.parse(res.data).code\r\n                // 0: 通过, 1: 未设置密码, 2: 密码不正确, 3: 用户不存在\r\n                switch(code){\r\n                    case 0: \r\n                    case 1: {\r\n                        console.log('login-userPhone:',this.userPhone)\r\n                        this.$cookie.set('userPhone', this.userPhone, 3)\r\n                        this.$router.push(this.redirect)\r\n                        break\r\n                    }\r\n                    case 2: {\r\n                        this.$message.error('密码不正确')\r\n                        this.setPassword('')\r\n                        break\r\n                    }\r\n                    case 3: {\r\n                        this.$message.error('用户不存在')\r\n                        this.setPassword('')\r\n                        break\r\n                    }\r\n                    default: this.$router.push('/home')\r\n                }\r\n            })\r\n            .catch(err => console.log(err))\r\n        },\r\n        loginWithAuthcode(){ // 验证码登录\r\n            this.loading = true\r\n            // 请求验证码\r\n            this.requestAuthcode(\r\n                (res) => {\r\n                    this.authCode = res.data.authCode\r\n                    this.saveAuthInfo(this)\r\n                    this.$router.push('/login/inputAuthcode')\r\n                },\r\n                {},\r\n                () => this.loading = false\r\n            )\r\n        }\r\n    },\r\n    filters: {\r\n        loginMethod(value){\r\n            return value ? '验证码登录' : '密码登录'\r\n        }\r\n    },\r\n    beforeRouteEnter (to, from, next) {\r\n        next(vm => {\r\n            let redirects = ['/order', '/mine']\r\n            let redirect = redirects.find(path => from.fullPath === path)\r\n            if(redirect) vm.redirect = redirect\r\n        })\r\n    },\r\n    created() {\r\n        console.log('login-userPhone:',this.userPhone)\r\n    },\r\n}\r\n</script>\r\n\r\n<style lang=\"less\">\r\n@import \"~@/assets/css/mixin.less\";\r\n#login-form-get_authentication {\r\n    .margin-top-rem(28px);\r\n}\r\n// 布局\r\n.login {\r\n    .flex-column();\r\n    &-header,\r\n    &-footer {\r\n        .flex-shrink(0);\r\n    }\r\n    &-form {\r\n        .flex-grow(1);\r\n    }\r\n}\r\n.login{\r\n    height: 100%;\r\n    background-color: @bg-white;\r\n    &-header {\r\n        .flex-sb-center();\r\n        color: @color-primary;\r\n        .padding-horizontal(@padding-sm);\r\n        .padding-vertical(@padding-base);\r\n    }\r\n    &-form {\r\n        .margin-top-rem(45px);\r\n        .padding-horizontal(30px);\r\n        &-title {\r\n            .font-size-rem(30px);\r\n            color: @text-color-title;\r\n        }\r\n        &-main {\r\n            .margin-top-rem(50px);\r\n            .form-item {\r\n                .flex();\r\n                .align-items(center);\r\n                .margin-top-rem(12px);\r\n                border-bottom: 1px solid #d1d1d1;\r\n                // 取消 element 插件 input 组件的边框\r\n                .el-input {\r\n                    input {\r\n                        border: none;\r\n                    }\r\n                }\r\n                .form-input_append {\r\n                    // width: unit( 100px / @font-size-root, rem);\r\n                    .flex-shrink(0);\r\n                    .margin-right-rem(10px);\r\n                    .font-size-rem(@font-size-sm);\r\n                }\r\n                .form-input {\r\n                    .flex-grow(1);\r\n                    .font-size-rem(@font-size-root);\r\n                    color: #000;\r\n                    &>input{\r\n                        letter-spacing: 1px;\r\n\r\n                    }\r\n                }\r\n            }\r\n            &-tips {\r\n                .font-size-rem(@font-size-sm);\r\n                color: #d1d1d1;\r\n                .margin-top-rem(@margin-base);\r\n            }\r\n        }\r\n        &-by-password {\r\n            .margin-top-rem(18px);\r\n            .font-size-rem(@font-size-sm);\r\n        }\r\n    }\r\n    &-footer {\r\n        &-other_ways {\r\n            .flex-sa-center();\r\n            .icon-wrapper {\r\n                @size: 60px;\r\n                width: @size;\r\n                height: @size;\r\n                line-height: @size;\r\n                text-align: center;\r\n                border-radius: 50%;\r\n                border: 1px solid @border-color-divition;\r\n                background-color: @bg-white;\r\n                .iconfont {\r\n                    font-size: 26px;\r\n                }\r\n                .icon-wechat {\r\n                    color: #43c344;\r\n                }\r\n                .icon-qq {\r\n                    color: #4face5;\r\n                }\r\n            }\r\n        }\r\n        &-p {\r\n            .margin-top-rem(30px);\r\n            .margin-bottom-rem(20px);\r\n            .font-size-rem(@font-size-sm);\r\n            text-align: center;\r\n            &-mark {\r\n                color: @color-primary;\r\n            }\r\n        }\r\n    }\r\n}\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Login.vue?vue&type=template&id=05c39273&\"\nimport script from \"./Login.vue?vue&type=script&lang=js&\"\nexport * from \"./Login.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Login.vue?vue&type=style&index=0&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import axios from 'axios'\r\n\r\nconst mixin = {\r\n    methods: {\r\n        saveAuthInfo(context){\r\n            let keyValue = {\r\n                startTime: new Date().getTime(),\r\n                authCode: context.authCode,\r\n                redirect: context.redirect\r\n            }\r\n            sessionStorage.setItem('authInfo', JSON.stringify(keyValue));\r\n        },\r\n        requestAuthcode(cb, errcb, finallycb){\r\n            axios.get('/api/create-authcode')\r\n                .then(res=>{\r\n                    if(res.data.authcodeReady){\r\n                        cb && cb(res)\r\n                    }\r\n                })\r\n                .catch(err=>{\r\n                    errcb && errcb()\r\n                    console.log(err)\r\n                })\r\n                .finally(() => finallycb && finallycb())\r\n        },\r\n        fetchSesstionStorage(key){\r\n            return JSON.parse(sessionStorage.getItem(key))\r\n        },\r\n    },\r\n}\r\n\r\nexport default mixin"],"sourceRoot":""}