(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-41cc1cba"],{3983:function(t,e,o){},b731:function(t,e,o){"use strict";var n=o("3983"),i=o.n(n);i.a},f205:function(t,e,o){"use strict";o.r(e);var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"login-input_authcode"},[o("header",{staticClass:"login-input_authcode-header"},[o("div",{staticClass:"login-close iconfont icon-back-m",on:{click:function(e){return t.$router.go(-1)}}}),o("router-link",{attrs:{to:"/help"}},[t._v("帮助")])],1),o("div",{staticClass:"login-input_authcode-main"},[o("p",{staticClass:"login-input_authcode-main-title"},[t._v("输入验证码 ("+t._s(t.authCode)+")")]),o("div",{staticClass:"input_authcode"},[o("p",{staticClass:"input_authcode-tips"},[t._v("验证码已发送至 "+t._s(t.userPhone))]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.input,expression:"input"}],staticClass:"input_authcode-input",attrs:{type:"text",maxlength:"4"},domProps:{value:t.input},on:{keyup:t.inputAuthcode,input:function(e){e.target.composing||(t.input=e.target.value)}}}),t.second>0?o("p",{staticClass:"input_authcode-nofication"},[t._v(t._s(t.second)+" 秒后重新获取验证码")]):o("div",{staticClass:"input_authcode-get_authcode_again",on:{click:t.popupAuthcodePop}},[t._v("收不到验证码点这里")])])]),o("div",{directives:[{name:"show",rawName:"v-show",value:t.authcodePopShow,expression:"authcodePopShow"}],staticClass:"input_authcode-pop",on:{click:function(e){return e.target!==e.currentTarget?null:t.closeAuthcodePop(e)}}},[o("div",{staticClass:"input_authcode-pop-inner"},[o("div",{staticClass:"pop-options"},[o("div",{staticClass:"pop-options-item",on:{click:t.getAuthcodeAgain}},[t._v("重新获取验证码")]),o("div",{staticClass:"pop-options-item",on:{click:t.getAuthcdeByPhone}},[t._v("接听语音验证码")])]),o("div",{staticClass:"pop-cancel",on:{click:t.closeAuthcodePop}},[t._v("取消")])])])])},i=[],a=o("cebc"),s=o("7f43"),c=o.n(s),u=o("2f62"),r=o("f70b"),h={name:"LoginInputAuthcode",mixins:[r["a"]],data:function(){return{input:"",loading:!1,second:60,authcodePopShow:!1,timer:"",redirect:"",authCode:""}},computed:Object(a["a"])({},Object(u["e"])("login",{userPhone:function(t){return t.userPhone}})),methods:Object(a["a"])({},Object(u["d"])("login",["setUserPhone"]),{_initAuthInfo:function(){this.authCode=this.fetchSesstionStorage("authInfo").authCode,this.second=59-parseInt(((new Date).getTime()-this.fetchSesstionStorage("authInfo").startTime)/1e3),this.redirect=this.fetchSesstionStorage("authInfo").redirect||"/"},countDown:function(){var t=this,e=this.fetchSesstionStorage("authInfo").startTime;this.timer=setInterval(function(){t.second<=0?window.clearInterval(t.timer):t.second=59-parseInt(((new Date).getTime()-e)/100)},1e3)},inputAuthcode:function(){var t=this;if(4===this.input.length){this.loading=!0;var e={userPhone:this.userPhone,authCode:this.input};c.a.post("/api/login-authcode",e).then(function(e){var o=e.data.code;switch(console.log("code",o),o){case 0:case 1:console.log("userPhone:",t.userPhone),t.$cookie.set("userPhone",t.userPhone,3),t.$router.push(t.redirect);break;case 2:t.$message.error("验证码错误, 请重新输入"),t.input="";break}}).catch(function(t){return console.log(t)}).finally(function(){return t.loading=!1})}},popupAuthcodePop:function(){this.authcodePopShow=!0},closeAuthcodePop:function(){this.authcodePopShow=!1},getAuthcodeAgain:function(){var t=this;this.loading=!0,this.requestAuthcode(function(e){t.authCode=e.data.authCode,t.saveAuthInfo(t)},{},function(){t.closeAuthcodePop(),t.loading=!1})},getAuthcdeByPhone:function(){this.$message.error("功能暂未推出"),this.closeAuthcodePop()}}),created:function(){this._initAuthInfo(),this.countDown()},beforeRouteLeave:function(t,e,o){window.clearInterval(this.timer),this.$destroy(),o()}},d=h,l=(o("b731"),o("2877")),p=Object(l["a"])(d,n,i,!1,null,null,null);e["default"]=p.exports},f70b:function(t,e,o){"use strict";var n=o("7f43"),i=o.n(n),a={methods:{saveAuthInfo:function(t){var e={startTime:(new Date).getTime(),authCode:t.authCode,redirect:t.redirect};sessionStorage.setItem("authInfo",JSON.stringify(e))},requestAuthcode:function(t,e,o){i.a.get("/api/create-authcode").then(function(e){e.data.authcodeReady&&t&&t(e)}).catch(function(t){e&&e(),console.log(t)}).finally(function(){return o&&o()})},fetchSesstionStorage:function(t){return JSON.parse(sessionStorage.getItem(t))}}};e["a"]=a}}]);
//# sourceMappingURL=chunk-41cc1cba.c43d619a.js.map